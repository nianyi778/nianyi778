name: Metrics
on:
  schedule: [{cron: "0 0 * * *"}]
  workflow_dispatch:
  push: {branches: ["main"]}
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      # ----------------------------------------------
      # 核心配置区 - 3D 立体风格
      # ----------------------------------------------
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: github-metrics.svg
          
          # ✅ 使用深色背景
          config_theme: dark
          
          user: nianyi778
          # 只保留头部基础信息，把空间留给 3D 图
          base: header, activity, community, repositories
          config_timezone: Asia/Shanghai
          
          # ✅ 核心插件：3D 立体日历
          plugin_isocalendar: yes
          plugin_isocalendar_duration: half-year # 显示半年的数据
          
          # ✅ 插件：语言分析条
          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_details: percentage
